{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useParams,useNavigate}from'react-router-dom';import axios from'axios';import OptionsForm from'./OptionsForm';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function ReservationSystem(){const{id}=useParams();const[book,setBook]=useState(null);const[isAudioBook,setAudioBook]=useState(false);const[isQuickPickUp,setQuickPickUp]=useState(false);const[reservationPeriod,setReservationPeriod]=useState(null);const navigate=useNavigate();const today=new Date().toISOString().split(\"T\")[0];const handleAudioCheckBox=()=>{setAudioBook(prev=>!prev);setQuickPickUp(false);};const handleQuickPickUpCheckBox=()=>{setQuickPickUp(prev=>!prev);};const handleReservationPeriodChange=event=>{setReservationPeriod(event.target.value);};useEffect(()=>{axios.get(`/api/books/${id}`).then(response=>{setBook(response.data);setAudioBook(response.data.isAudioBook);}).catch(error=>{console.error(\"Error retrieving book information:\",error);});},[id]);const handleSubmit=async event=>{event.preventDefault();const reservationData={BookId:id,IsAudioBook:isAudioBook,IsQuickPickUp:isQuickPickUp,ReservationEnd:reservationPeriod};try{const response=await axios.post('/api/reservations/create',reservationData);console.log(\"Yay\",response.data);navigate(-1);}catch(error){console.error(\"Error\",error);}};if(!book){return/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"});}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"txt\",children:\"Reserve Book\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"txt\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Title:\"}),\" \",book.title]}),/*#__PURE__*/_jsxs(\"p\",{className:\"txt\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Author:\"}),\" \",book.author]}),/*#__PURE__*/_jsx(OptionsForm,{isAudioBook:isAudioBook,isQuickPickUp:isQuickPickUp,reservationPeriod:reservationPeriod,handleAudioCheckBox:handleAudioCheckBox,handleQuickPickUpCheckBox:handleQuickPickUpCheckBox,handleReservationPeriodChange:handleReservationPeriodChange,handleSubmit:handleSubmit})]});}","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","axios","OptionsForm","jsx","_jsx","jsxs","_jsxs","ReservationSystem","id","book","setBook","isAudioBook","setAudioBook","isQuickPickUp","setQuickPickUp","reservationPeriod","setReservationPeriod","navigate","today","Date","toISOString","split","handleAudioCheckBox","prev","handleQuickPickUpCheckBox","handleReservationPeriodChange","event","target","value","get","then","response","data","catch","error","console","handleSubmit","preventDefault","reservationData","BookId","IsAudioBook","IsQuickPickUp","ReservationEnd","post","log","children","className","title","author"],"sources":["D:/Development/C#/Book_Reservation_app/reservation_system/src/ReservationSystem.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport OptionsForm from './OptionsForm';\r\n\r\nexport default function ReservationSystem() {\r\n    const { id } = useParams();\r\n    const [book, setBook] = useState(null);\r\n    const [isAudioBook, setAudioBook] = useState(false);\r\n    const [isQuickPickUp, setQuickPickUp] = useState(false);\r\n    const [reservationPeriod, setReservationPeriod] = useState(null);\r\n\r\n    const navigate = useNavigate();\r\n\r\n    const today = new Date().toISOString().split(\"T\")[0];\r\n\r\n    const handleAudioCheckBox = () => {\r\n        setAudioBook((prev) => !prev);\r\n        setQuickPickUp(false);\r\n    };\r\n\r\n    const handleQuickPickUpCheckBox = () => {\r\n        setQuickPickUp((prev) => !prev);\r\n    };\r\n\r\n    const handleReservationPeriodChange = (event) => {\r\n        setReservationPeriod(event.target.value);\r\n    };\r\n\r\n    useEffect(() => {\r\n        axios.get(`/api/books/${id}`)\r\n            .then(response => {\r\n                setBook(response.data);\r\n                setAudioBook(response.data.isAudioBook);\r\n            })\r\n            .catch(error => {\r\n                console.error(\"Error retrieving book information:\", error);\r\n            });\r\n    }, [id]);\r\n\r\n    const handleSubmit = async (event) => {\r\n        event.preventDefault();\r\n\r\n        const reservationData = {\r\n            BookId: id,\r\n            IsAudioBook: isAudioBook,\r\n            IsQuickPickUp: isQuickPickUp,\r\n            ReservationEnd: reservationPeriod\r\n        };\r\n\r\n        try {\r\n            const response = await axios.post('/api/reservations/create', reservationData);\r\n            console.log(\"Yay\", response.data);\r\n            navigate(-1);\r\n        } catch (error) {\r\n            console.error(\"Error\", error);\r\n        }\r\n    };\r\n\r\n    if (!book) {\r\n        return <p>Loading...</p>;\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <h2 className='txt'>Reserve Book</h2>\r\n            <p className='txt'><strong>Title:</strong> {book.title}</p>\r\n            <p className='txt'><strong>Author:</strong> {book.author}</p>\r\n\r\n            <OptionsForm \r\n                isAudioBook={isAudioBook}\r\n                isQuickPickUp={isQuickPickUp}\r\n                reservationPeriod={reservationPeriod}\r\n                handleAudioCheckBox={handleAudioCheckBox}\r\n                handleQuickPickUpCheckBox={handleQuickPickUpCheckBox}\r\n                handleReservationPeriodChange={handleReservationPeriodChange}\r\n                handleSubmit={handleSubmit}/>\r\n        </div>\r\n\r\n    );\r\n    \r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}